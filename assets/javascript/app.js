// Variables
var produce = [{
        name: "Avocados",
        image: "<img src='assets/images/avocados.jpg'>",
        answerOptions: ["13", "2", "1", "3"],
        hint: "I'm Number __!",
        answer: "1"
    },
    {
        name: "Celery",
        image: "<img src='assets/images/Celery.jpg'>",
        answerOptions: ["19", "22", "4", "66"],
        hint: "Turn the 'e's upside down",
        answer: "66"
    },
    {
        name: "Roma Tomatoes",
        image: "<img src='assets/images/romas.jpg'>",
        answerOptions: ["7", "45", "54", "55"],
        hint: "Cut the 'T' in half",
        answer: "7"
    },
    {
        name: "Acorn Squash",
        image: "<img src='assets/images/acorn-squash.jpg'>",
        answerOptions: ["5", "45", "14", "55"],
        hint: "Valentine's Day",
        answer: "14"
    },
    {
        name: "Cantaloupe",
        image: "<img src='assets/images/cantaloupe.png'>",
        answerOptions: ["4", "69", "12", "36"],
        hint: "Cantaloupe Sex",
        answer: "69"
    },
    {
        name: "Beefsteak Tomatoes",
        image: "<img src='assets/images/beefsteak-tomato.jpg'>",
        answerOptions: ["5", "31", "73", "77"],
        hint: "'The Year Dark Side of The Moon' was released",
        answer: "73"
    },
    {
        name: "Strawberries",
        image: "<img src='assets/images/Strawberry.jpg'>",
        answerOptions: ["2", "1", "3", "4"],
        hint: "How many 'e's?",
        answer: "2"
    },
    {
        name: "Seedless Cucumbers",
        image: "<img src='assets/images/seedlesscucumber.jpg'>",
        answerOptions: ["4", "87", "78", "90"],
        hint: "The year Robocop was released",
        answer: "87"
    },
    {
        name: "Bananas",
        image: "<img src='assets/images/bananas.jpg'>",
        answerOptions: ["2", "4", "3", "7"],
        hint: "1, 2, __",
        answer: "3"
    },
    {
        name: "Cucumbers",
        image: "<img src='assets/images/cucumbers.jpg'>",
        answerOptions: ["9", "44", "4", "7"],
        hint: "Cucmbers __ everyone!",
        answer: "4"
    },
    {
        name: "Limes",
        image: "<img src='assets/images/limes.jpg'>",
        answerOptions: ["8", "49", "21", "9"],
        hint: "Kobe's first jersey",
        answer: "8"
    },
    {
        name: "Mangoes",
        image: "<img src='assets/images/mango.jpg'>",
        answerOptions: ["17", "89", "9", "5"],
        hint: "lower case g's look like a __",
        answer: "9"
    },
    {
        name: "Green Peppers",
        image: "<img src='assets/images/green-pepper.jpg'>",
        answerOptions: ["10", "12", "11", "51"],
        hint: "How many fingers do you have?",
        answer: "10"
    },
    {
        name: "Iceberg Lettuce",
        image: "<img src='assets/images/iceberg-lettuce.jpg'>",
        answerOptions: ["12", "31", "13", "33"],
        hint: "Unlucky number",
        answer: "13"
    },
    {
        name: "Pineapples",
        image: "<img src='assets/images/pineapple.jpg'>",
        answerOptions: ["18", "81", "11", "88"],
        hint: "Coming of age",
        answer: "18"
    },
    {
        name: "Organic Bananas",
        image: "<img src='assets/images/organic-bananas.jpg'>",
        answerOptions: ["33", "41", "116", "22"],
        hint: "Taylor Swift is feeling __",
        answer: "22"
    },
    {
        name: "Zucchini",
        image: "<img src='assets/images/zucchini.jpg'>",
        answerOptions: ["143", "101", "127", "107"],
        hint: "James Franco ___ Hours",
        answer: "127"
    },
    {
        name: "Tomatillos",
        image: "<img src='assets/images/tomatillos.jpg'>",
        answerOptions: ["72", "96", "27", "22"],
        hint: "Cut the T in half, count the l's",
        answer: "72"
    },
    {
        name: "Vine Tomatoes",
        image: "<img src='assets/images/vine-tomatoes.jpg'>",
        answerOptions: ["5", "6", "7", "16"],
        hint: "# of letters divided by 2",
        answer: "6"
    },
    {
        name: "Honeydew Melons",
        image: "<img src='assets/images/honeydew.jpg'>",
        answerOptions: ["18", "8", "9", "88"],
        hint: "o+o",
        answer: "88"
    },
    {
        name: "Grape Fruit",
        image: "<img src='assets/images/grapefruit.jpg'>",
        answerOptions: ["142", "138", "134", "101"],
        hint: "Freeway to Pasadena",
        answer: "134"
    },
    {
        name: "Cauliflower",
        image: "<img src='assets/images/cauliflower.jpg'>",
        answerOptions: ["58", "85", "134", "11"],
        hint: "",
        answer: "58"
    },
    {
        name: "Cabbage",
        image: "<img src='assets/images/cabbage.jpg'>",
        answerOptions: ["14", "59", "13", "58"],
        hint: "",
        answer: "59"
    },
    {
        name: "Orange Peppers",
        image: "<img src='assets/images/orange-peppers.jpg'>",
        answerOptions: ["142", "138", "124", "101"],
        hint: "",
        answer: "124"
    },
    {
        name: "Garlic",
        image: "<img src='assets/images/garlic.jpg'>",
        answerOptions: ["143", "188", "134", "118"],
        hint: "Freeway to Simi Valley",
        answer: "118"
    },
    {
        name: "Medley Potatoes",
        image: "<img src='assets/images/medley-potatoes.jpg'>",
        answerOptions: ["65", "69", "45", "101"],
        hint: "Retire at this age",
        answer: "65"
    },
    {
        name: "Red Cherries LRW",
        image: "<img src='assets/images/red-cherries.jpg'>",
        answerOptions: ["192", "17", "134", "191"],
        hint: "",
        answer: "192"
    },
    {
        name: "Lemons",
        image: "<img src='assets/images/lemons.jpg'>",
        answerOptions: ["6", "12", "199", "200"],
        hint: "",
        answer: "200"
    },
    {
        name: "Red Delicious Apples Bagged",
        image: "<img src='assets/images/red-delicious-apples-bagged.jpg'>",
        answerOptions: ["148", "184", "34", "191"],
        hint: "",
        answer: "184"
    },
    {
        name: "Red Peppers",
        image: "<img src='assets/images/red-peppers.jpg'>",
        answerOptions: ["53", "35", "55", "33"],
        hint: "",
        answer: "53"
    },
    {
        name: "Ataulfo Mangoes",
        image: "<img src='assets/images/ataulfo-mangoes.jpg'>",
        answerOptions: ["4", "98", "45", "10"],
        hint: "",
        answer: "45"
    },
    {
        name: "Green Onions",
        image: "<img src='assets/images/green-onions.jpg'>",
        answerOptions: ["138", "38", "14", "19"],
        hint: "",
        answer: "38"
    },
    {
        name: "Red Grapes LRW",
        image: "<img src='assets/images/red-grapes.jpg'>",
        answerOptions: ["40", "87", "30", "61"],
        hint: "Must look this old to not card",
        answer: "40"
    },
    {
        name: "Yellow Peppers",
        image: "<img src='assets/images/yellow-peppers.jpg'>",
        answerOptions: ["55", "72", "91", "101"],
        hint: "Costa Mesa Frwy",
        answer: "55"
    },
    {
        name: "Seedless Watermelon",
        image: "<img src='assets/images/seeded-watermelon.jpg'>",
        answerOptions: ["77", "138", "70", "9"],
        hint: "",
        answer: "70"
    },
    {
        name: "Broccoli Crowns",
        image: "<img src='assets/images/broccoli-crowns.jpg'>",
        answerOptions: ["86", "85", "77", "1"],
        hint: "Palmdale is store #__",
        answer: "85"
    },
    {
        name: "Baby Seedless Watermelon",
        image: "<img src='assets/images/baby-seedless-watermelon.jpg'>",
        answerOptions: ["73", "71", "89", "1"],
        hint: "",
        answer: "71"
    },
    {
        name: "Golden Honeydew",
        image: "<img src='assets/images/golden-honeydew.jpg'>",
        answerOptions: ["89", "135", "153", "51"],
        hint: "",
        answer: "135"
    },
    {
        name: "Sweet Potatoes",
        image: "<img src='assets/images/sweet-potato.jpg'>",
        answerOptions: ["3", "61", "69", "71"],
        hint: "",
        answer: "61"
    },
    {
        name: "Jicama LRW",
        image: "<img src='assets/images/jicama.jpg'>",
        answerOptions: ["173", "11", "132", "31"],
        hint: "",
        answer: "132"
    },
    {
        name: "Fuji Apple LRW",
        image: "<img src='assets/images/fuji-apple.jpg'>",
        answerOptions: ["87", "91", "80", "81"],
        hint: "",
        answer: "80"
    },
    {
        name: "Gala Apple LRW",
        image: "<img src='assets/images/gala-apple.jpg'>",
        answerOptions: ["73", "83", "81", "80"],
        hint: "Kobe's points record",
        answer: "81"
    },
    {
        name: "Sweet Corn",
        image: "<img src='assets/images/sweet-corn.jpg'>",
        answerOptions: ["72", "21", "29", "1"],
        hint: "",
        answer: "29"
    },
    {
        name: "Seeded Watermelon",
        image: "<img src='assets/images/seeded-watermelon.jpg'>",
        answerOptions: ["162", "71", "189", "1"],
        hint: "",
        answer: "162"
    },
    {
        name: "Valencia Oranges",
        image: "<img src='assets/images/valencia-oranges.jpg'>",
        answerOptions: ["23", "173", "122", "1"],
        hint: "",
        answer: "122"
    },
    {
        name: "Rainier Cherries LRW",
        image: "<img src='assets/images/rainier-cherries.jpg'>",
        answerOptions: ["196", "71", "189", "91"],
        hint: "",
        answer: "196"
    },
    {
        name: "Pumpkins",
        image: "<img src='assets/images/pumpkin.jpg'>",
        answerOptions: ["92", "71", "95", "91"],
        hint: "",
        answer: "92"
    },
    {
        name: "Plantains LRW",
        image: "<img src='assets/images/plantain.jpg'>",
        answerOptions: ["165", "71", "169", "91"],
        hint: "",
        answer: "165"
    },
    {
        name: "Peaches LRW",
        image: "<img src='assets/images/peaches.jpg'>",
        answerOptions: ["195", "67", "189", "193"],
        hint: "",
        answer: "193"
    },
    {
        name: "Org Yellow Onions",
        image: "<img src='assets/images/org-yellow-onions.jpg'>",
        answerOptions: ["196", "141", "19", "91"],
        hint: "",
        answer: "141"
    },
    {
        name: "Cilantro",
        image: "<img src='assets/images/cilantro.jpg'>",
        answerOptions: ["5", "4", "10", "91"],
        hint: "Fingers on one hand",
        answer: "5"
    },
    {
        name: "Honeydew",
        image: "<img src='assets/images/honeydew.jpg'>",
        answerOptions: ["133", "187", "14", "91"],
        hint: "",
        answer: "133"
    },
    {
        name: "Bagged Avocados",
        image: "<img src='assets/images/bagged-avocados.jpg'>",
        answerOptions: ["11", "1", "12", "91"],
        hint: "Seven ___",
        answer: "11"
    },
    {
        name: "Mini Sweet Peppers",
        image: "<img src='assets/images/mini-sweet-peppers.jpg'>",
        answerOptions: ["51", "71", "19", "91"],
        hint: "",
        answer: "51"
    },
    {
        name: "Poblano Peppers LRW",
        image: "<img src='assets/images/poblano-pepper.jpg'>",
        answerOptions: ["153", "52", "18", "91"],
        hint: "",
        answer: "52"
    },
    {
        name: "Jalapeno Peppers",
        image: "<img src='assets/images/jalapeno-pepper.jpg'>",
        answerOptions: ["50", "71", "16", "51"],
        hint: "Half of 100",
        answer: "50"
    },
    {
        name: "Serrano Peppers",
        image: "<img src='assets/images/serrano-pepper.jpg'>",
        answerOptions: ["149", "71", "199", "54"],
        hint: "",
        answer: "54"
    },
    {
        name: "Pink Lady Apples LRW",
        image: "<img src='assets/images/pink-lady-apple.jpg'>",
        answerOptions: ["129", "131", "139", "91"],
        hint: "",
        answer: "131"
    },
    {
        name: "Blackberries",
        image: "<img src='assets/images/blackberries.jpg'>",
        answerOptions: ["16", "161", "199", "91"],
        hint: "",
        answer: "161"
    },
    {
        name: "Ginger LRW",
        image: "<img src='assets/images/ginger.jpg'>",
        answerOptions: ["205", "71", "200", "91"],
        hint: "",
        answer: "205"
    },
    {
        name: "Chayote Squash",
        image: "<img src='assets/images/chayote-squash.jpg'>",
        answerOptions: ["25", "141", "20", "91"],
        hint: "",
        answer: "141"
    },
    {
        name: "Butternut Squash",
        image: "<img src='assets/images/butternut-squash.jpg'>",
        answerOptions: ["51", "71", "15", "91"],
        hint: "",
        answer: "15"
    },
    {
        name: "Spaghetti Squash",
        image: "<img src='assets/images/spaghetti-squash.jpg'>",
        answerOptions: ["16", "71", "18", "17"],
        hint: "",
        answer: "16"
    },
    {
        name: "Nectarines",
        image: "<img src='assets/images/nectarine.jpg'>",
        answerOptions: ["295", "71", "194", "91"],
        hint: "",
        answer: "194"
    },
    {
        name: "Mini Bananas",
        image: "<img src='assets/images/mini-bananas-jpg'>",
        answerOptions: ["183", "71", "138", "91"],
        hint: "",
        answer: "138"
    },
    {
        name: "Mexican Green Onion",
        image: "<img src='assets/images/mexican-green-onions.jpg'>",
        answerOptions: ["164", "71", "24", "91"],
        hint: "",
        answer: "164"
    },
    {
        name: "Green Grapes LRW",
        image: "<img src='assets/images/green-grapes.jpg'>",
        answerOptions: ["14", "71", "24", "41"],
        hint: "Dirk Nowitzki",
        answer: "41"
    },
    {
        name: "Gourmet Medley Tomatoes",
        image: "<img src='assets/images/gourmet-medley-tomatoes.jpg'>",
        answerOptions: ["164", "75", "54", "91"],
        hint: "3 Quarters",
        answer: "75"
    },
    {
        name: "Comice Pears LRW",
        image: "<img src='assets/images/comice-pears.jpg'>",
        answerOptions: ["154", "71", "144", "91"],
        hint: "12x12",
        answer: "144"
    },
    {
        name: "Black Grapes LRW",
        image: "<img src='assets/images/black-grapes.jpg'>",
        answerOptions: ["16", "42", "24", "98"],
        hint: "BLUE __",
        answer: "42"
    },
    {
        name: "Yellow Squash",
        image: "<img src='assets/images/yellow-squash.jpg'>",
        answerOptions: ["131", "167", "14", "130"],
        hint: "One Flirty",
        answer: "130"
    }
];

var correct = 0;
var incorrect = 0;
var questionCounter = 0;
var clockRunning = false;
var timer = 15;
var intervalId;
var delayButtonAlert;




// Fisher-Yates Shuffle - shuffles the objects in the array
function shuffle() {
    var i = (produce.length),
        j, temp;
    while (--i > 0) {
        j = Math.floor(Math.random() * (i + 1));
        temp = produce[j];
        produce[j] = produce[i];
        produce[i] = temp;
    }
    console.log(produce);
}

// Displays questions, answers, hints in main section
function displayHTML() {
    $("#question").html(produce[questionCounter].name);
    $("#image").html(produce[questionCounter].image);
    $("#answer1").html(produce[questionCounter].answerOptions[0]);
    $("#answer2").html(produce[questionCounter].answerOptions[1]);
    $("#answer3").html(produce[questionCounter].answerOptions[2]);
    $("#answer4").html(produce[questionCounter].answerOptions[3]);
    $("#hint-display").html(produce[questionCounter].hint);

}

function run() {
    intervalId = setInterval(decrement, 1000);
}

function decrement() {
    if (timer > 0) {
        timer--;
    }
    if (timer === 0) {
        timeOutLoss();
        timer = 15;
    }
    $("#timer").html("Seconds Remaining: " + timer);
}

function stop() {
    clearInterval(intervalId);
}

function win() {
    console.log("You Win!");
    correct++;
    wait();
    var showAnswerCorrect = $("#result").html("You choose the right answer!");
    showAnswerCorrect.show();
    delayButtonAlert = setTimeout(function() {
        showAnswerCorrect.hide();
    }, 2000);
    $("#hint-display").hide();
}

function lose() {
    console.log("You Lose!");
    incorrect++;
    wait();
    var showAnswerIncorrect = $("#result").html("The correct answer was " + produce[questionCounter - 1].answer);
    showAnswerIncorrect.show();
    delayButtonAlert = setTimeout(function() {
        showAnswerIncorrect.hide();
    }, 2500);
    $("#hint-display").hide();
}

function timeOutLoss() {
    console.log("You Timed Out!");
    incorrect++;
    wait();
    var showAnswerTimeOut = $("#result").html("You didn't pick an answer!");
    showAnswerTimeOut.show();
    delayButtonAlert = setTimeout(function() {
        showAnswerTimeOut.hide();
    }, 1500);
    $("#hint-display").hide();
}

function wait() {
    questionCounter++;
    if (questionCounter < produce.length) {
        // displayCorrectAnswer();
        displayHTML();
        timer = 15;
        stop();
        run();
    } else
        finalPage();
}

function hideAll() {
    $("#question").hide();
    $("#image").hide();
    $("#answer1").hide();
    $("#answer2").hide();
    $("#answer3").hide();
    $("#answer4").hide();
    $("#hint").hide();
    $("#timer").hide();
}

function displayAll() {
    $("#question").show();
    $("#image").show();
    $("#answer1").show();
    $("#answer2").show();
    $("#answer3").show();
    $("#answer4").show();
    $("#hint").show();
    $("#timer").show();
    $("#lastPage").hide();
}

// At the end of the game, total up: correct, incorrect and give a grade
function finalPage() {

    hideAll();

    $("#lastPage").html("<div id='grade'>Grade: " + Math.round(correct / (correct + incorrect) * 100) + "%</div>" + "<br>" + "Correct: " + correct + "<br>" + "Incorrect: " + incorrect + "<br>" + "<button class='display' id='reset'>Play Again</button>");
    stop();

    // Restart Game
    $("#reset").on("click", function() {
        var correct = 0;
        var incorrect = 0;
        var questionCounter = 0;
        var clockRunning = false;
        var timer = 15;
        var intervalId;
        var delayButtonAlert;

        displayAll();
        run();

    });
}


// Begin game
$("#main").hide();
$("#hint-display").hide();
shuffle();
// Hide "Play" button when clicked
$("#play").on("click", function(event) {
    $(this).hide();
    $("#main").show();
    displayHTML();
    run();
});

// When answer is clicked, move on to next question
$(".answer").on("click", function(event) {

    var selectedAnswer = $(this).text();

    if (selectedAnswer === produce[questionCounter].answer) {
        win();
        timer = 15;
    } else {
        lose();
        timer = 15;
    }

});


// Display Hint in Hint Box
$("#hint").on("click", function(event) {
    $("#hint-display").show();
})